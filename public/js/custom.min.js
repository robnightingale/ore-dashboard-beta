function countChecked(){"all"===checkState&&$(".bulk_action input[name='table_records']").iCheck("check"),"none"===checkState&&$(".bulk_action input[name='table_records']").iCheck("uncheck");var e=$(".bulk_action input[name='table_records']:checked").length;e?($(".column-title").hide(),$(".bulk-actions").show(),$(".action-cnt").html(e+" Records Selected")):($(".column-title").show(),$(".bulk-actions").hide())}function pdfMe(){html2canvas(document.getElementById("export_me_"),{onrendered:function(e){var t=e.toDataURL(),n={content:[{image:t,width:500}]};pdfMake.createPdf(n).download("ORE_Demo.pdf")}})}function guid(){function e(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return e()+e(!0)+e(!0)+e()}function _AttachEvent(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function checkNestedFast(e){for(var t=1;t<arguments.length;t++){if(!e.hasOwnProperty(arguments[t]))return!1;e=e[arguments[t]]}return!0}function isNullOrUndefined(e){var t=!1;return"undefined"!=typeof e&&null!==e||(t=!0),t}function getJSessionId(){var e=document.cookie.match(/JSESSIONID=[^;]+/);return null!=e&&(e=e instanceof Array?e[0].substring(11):e.substring(11)),e}function getContextPath(){var e=window.location.pathname,t="/"!==e?e.substring(0,e.indexOf("/",1)+1):e;return t+(/\/$/.test(t)?"":"/")}function filter(e,t){for(var n,r=[],a=0,i=e.length;a<i;a++)n=e[a],t(n)&&r.push(n);return r}function cloneCanvas(e){var t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0),t}function lineChartTooltipFormatter(e,t,n){try{if("markLine"===e.componentType)return"Limit "+e.seriesName+" : "+numeral(e.value).format("(0,0)");for(var r=chartManager.getBaseCcy(),a=moment(e[0].value[0]).format("DD-MM-YYYY")+"<br/>",i=0,o=e.length;i<o;i++){var s='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[i].color+'"></span>';a+=s+" "+e[i].seriesName+" : "+r+" "+numeral(e[i].value[1]).format("(0,0)")+"<br/>"}return a}catch(c){console.error(c)}}function donutChartTooltipFormatter(e,t,n){var r=chartManager.getBaseCcy(),a="",i='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e.color+'"></span>';return a+=i+" "+e.name+" : "+r+" "+numeral(e.value).format("(0,0)")+" : "+e.percent+"%<br/>"}function riskGuageTooltipFormatter(e,t,n){console.debug(e);var r=chartManager.getBaseCcy(),a="";return a+=e.name+" : "+r+" "+numeral(e.value).format("(0,0)")+" : "+e.percent+"%<br/>"}function riskGaugeLegendFormatter(e,t,n){var r="";return e.value>90&&(r+="LIMIT BREACH "),r+=numeral(e.value).format("(0.00)"),r+="%"}function barChartTooltipFormatter(e,t,n){for(var r="",a=chartManager.getBaseCcy(),i=0,o=e.length;i<o;i++){var s='<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[i].color+'"></span>';r+=s+" "+e[i].name+" : "+a+" "+numeral(e[i].value).format("(0,0)")+"<br/>"}return r}!function(){var e={version:"0.1.0",extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},include:function(e,t){this.extend(e.prototype,t)},inherits:function(e,t){function n(){this.constructor=e}this.extend(e,t),n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype},bind:function(e,t){return function(){return t.apply(e,arguments)}},Observable:{on:function(e,t){var n=this._callbacks||(this._callbacks={}),r=n[e]||(n[e]=[]);return r.push(t),this},off:function(e,t){var n;return e?(n=this._callbacks)&&(t?delete n[e]:n[e].splice(n[e].indexOf(t),1)):delete this._callbacks,this},trigger:function(e){var t,n,r;if((t=this._callbacks)&&(n=t[e])){r=Array.prototype.slice.call(arguments,1);for(var a=0,i=n.length;a<i;n[a++].apply(this,r));}return this}}};"undefined"!=typeof module&&module.exports?module.exports=e:window.OO=e}();var theme={color:["#26B99A","#34495E","#BDC3C7","#3498DB","#9B59B6","#8abb6f","#759c6a","#bfd3b7"],title:{itemGap:8,textStyle:{fontWeight:"normal",color:"#408829"}},dataRange:{color:["#1f610a","#97b58d"]},toolbox:{color:["#408829","#408829","#408829","#408829"]},tooltip:{backgroundColor:"rgba(0,0,0,0.5)",axisPointer:{type:"line",lineStyle:{color:"#408829",type:"dashed"},crossStyle:{color:"#408829"},shadowStyle:{color:"rgba(200,200,200,0.3)"}}},dataZoom:{dataBackgroundColor:"#eee",fillerColor:"rgba(64,136,41,0.2)",handleColor:"#408829"},grid:{borderWidth:0},categoryAxis:{axisLine:{lineStyle:{color:"#408829"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#408829"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},timeline:{lineStyle:{color:"#408829"},controlStyle:{normal:{color:"#408829"},emphasis:{color:"#408829"}}},k:{itemStyle:{normal:{color:"#68a54a",color0:"#a9cba2",lineStyle:{width:1,color:"#408829",color0:"#86b379"}}}},map:{itemStyle:{normal:{areaStyle:{color:"#ddd"},label:{textStyle:{color:"#c12e34"}}},emphasis:{areaStyle:{color:"#99d2dd"},label:{textStyle:{color:"#c12e34"}}}}},force:{itemStyle:{normal:{linkStyle:{strokeColor:"#408829"}}}},chord:{padding:4,itemStyle:{normal:{lineStyle:{width:1,color:"rgba(128, 128, 128, 0.5)"},chordStyle:{lineStyle:{width:1,color:"rgba(128, 128, 128, 0.5)"}}},emphasis:{lineStyle:{width:1,color:"rgba(128, 128, 128, 0.5)"},chordStyle:{lineStyle:{width:1,color:"rgba(128, 128, 128, 0.5)"}}}}},gauge:{startAngle:225,endAngle:-45,axisLine:{show:!0,lineStyle:{color:[[.2,"#86b379"],[.8,"#68a54a"],[1,"#408829"]],width:8}},axisTick:{splitNumber:10,length:12,lineStyle:{color:"auto"}},axisLabel:{textStyle:{color:"auto"}},splitLine:{length:18,lineStyle:{color:"auto"}},pointer:{length:"90%",color:"auto"},title:{textStyle:{color:"#333"}},detail:{textStyle:{color:"auto"}}},textStyle:{fontFamily:"Arial, Verdana, sans-serif"}},donutZoom=function(e,t,n){var r={mode:chartManager.getMode(),xvaHierarchy:t,xvaNode:n},a=chartManager.getGraphData(r,e,"xva");chartManager.initChart("donut_xva",DONUTCharts.getInstance().getDefaults,a,DONUTCharts.getInstance().setNewData,!1);var i=document.getElementsByName("donut_"+e)[0];document.getElementById("myModalLabel2").innerText=i.innerText},load_=function(){console.log("[INFO] ORE Dashboard.init");var e=document.getElementById("limitToggle");new Switchery(e,{size:"small",color:"#73879C"});_AttachEvent(e,"change",chartManager.toggleLimitsClick);var t=chartManager.populateBusinessDates(),n=chartManager.setBaseCcy();return Promise.all([t,n]).then(function(e){return console.log("[INFO] bus date calls and base ccy complete"),chartManager.resetPageDefaults(),console.debug(sessionStorage),chartManager.initAllCharts()}).then(function(e){console.log("[INFO] init charts complete");var t=document.getElementsByClassName("selectpicker");[].forEach.call(t,function(e){_AttachEvent(e,"change",chartManager.changeDate)}),[].forEach.call(document.getElementsByClassName("selectpicker-bg"),function(e){chartManager.populateBarGraphMetricList(e),_AttachEvent(e,"change",chartManager.setBGMetric)});var n=document.getElementById("gauge1_");return chartManager.populateRiskGaugeMetricListImpl(n),_AttachEvent(n,"change",chartManager.setRiskGaugeMetric),[].forEach.call($('label[name^="option"]'),function(e){_AttachEvent(e,"click",chartManager.drilldownMenuClick)}),[].forEach.call($('ol[id^="periscope"]'),function(e){_AttachEvent(e,"click",chartManager.breadcrumbClick)}),$("#xva-zoom").on("shown.bs.modal",function(e){var t=$(e.relatedTarget).data("id");if(1==chartManager.getMode()){var n=Math.min(chartManager.getLevel(),2),r=drilldownLevels[n].name;donutZoom(t,r,"")}else{var a="/api/periscope/"+chartManager.getHierarchy()+"/"+chartManager.getNode();chartManager.getDataFromRestCall(a).then(function(e){if(e.length>1)var n=e[1].hierarchy,r=e[1].item;else var n=chartManager.getHierarchy(),r=chartManager.getNode();donutZoom(t,n,r)})}}),"done"}).then(function(e){return chartManager.setBGMetricDefaults(),console.log("[INFO] ORE Dashboard init completed"),"done"})["catch"](function(e){console.error(new Error(e))})},drilldownLevels=[{name:"creditrating",level:0,text:"Credit Rating"},{name:"counterparty",level:1,text:"Counterparty"},{name:"nettingset",level:2,text:"Netting Set"},{name:"trade",level:3,text:"Trade"}],currencyMap=[{ccy:"BRL",symbol:"R$"},{ccy:"CNY",symbol:"¥"},{ccy:"CZK",symbol:"Kč"},{ccy:"DKK",symbol:"kr"},{ccy:"EUR",symbol:"€"},{ccy:"HUF",symbol:"Ft"},{ccy:"ISK",symbol:"kr"},{ccy:"IDR",symbol:"Rp"},{ccy:"JPY",symbol:"¥"},{ccy:"KRW",symbol:"₩"},{ccy:"NOK",symbol:"kr"},{ccy:"RUB",symbol:"руб"},{ccy:"SEK",symbol:"kr"},{ccy:"CHF",symbol:"CHF"},{ccy:"GBP",symbol:"£"},{ccy:"USD",symbol:"$"}],chartCategory=[{metric:"npv",category:"MARKET",tradeLevel:!0},{metric:"ce",category:"CREDIT",tradeLevel:!0},{metric:"epe",category:"CREDIT",tradeLevel:!0},{metric:"ene",category:"CREDIT",tradeLevel:!0},{metric:"pfe",category:"CREDIT",tradeLevel:!0},{metric:"eepe",category:"CREDIT",tradeLevel:!0},{metric:"cva",category:"CREDIT",tradeLevel:!1},{metric:"dva",category:"CREDIT",tradeLevel:!1},{metric:"saccr",category:"CREDIT",tradeLevel:!0},{metric:"el",category:"CREDIT",tradeLevel:!0},{metric:"uel",category:"CREDIT",tradeLevel:!0},{metric:"var",category:"MARKET",tradeLevel:!0},{metric:"es",category:"MARKET",tradeLevel:!0},{metric:"fca",category:"LIQUIDITY",tradeLevel:!1},{metric:"fba",category:"LIQUIDITY",tradeLevel:!1},{metric:"fva",category:"LIQUIDITY",tradeLevel:!1},{metric:"colva",category:"LIQUIDITY",tradeLevel:!1},{metric:"mva",category:"LIQUIDITY",tradeLevel:!1},{metric:"vm",category:"LIQUIDITY",tradeLevel:!0},{metric:"snco",category:"LIQUIDITY",tradeLevel:!0},{metric:"rsf",category:"LIQUIDITY",tradeLevel:!0}],barGraphs=[{id:"bar_1",name:"bar1",metric:"ce",text:""},{id:"bar_2",name:"bar2",metric:"npv",text:""},{id:"bar_3",name:"bar3",metric:"fca",text:""},{id:"bar_4",name:"bar4",metric:"fba",text:""},{id:"bar_5",name:"bar5",metric:"eepe",text:""},{id:"bar_6",name:"bar6",metric:"cva",text:""}],userBarGraphs=JSON.parse(JSON.stringify(barGraphs)),xvaGraphs=[{id:"donut_cva",name:"donut_cva",metric:"cva",text:"CVA"},{id:"donut_fva",name:"donut_fva",metric:"fva",text:"FVA"},{id:"donut_colva",name:"donut_colva",metric:"colva",text:"ColVA"}],chartManager={initAllCharts:function(){return LINECharts.getInstance().initAllCharts(),BARCharts.getInstance().initAllCharts(),DONUTCharts.getInstance().initAllCharts(),RISKGauge.getInstance().initAllCharts(),Promise.resolve("done")},initChart:function(e,t,n,r,a){return Promise.resolve(n).then(function(n){var i=echarts.init(document.getElementById(e),theme);return i.setOption(t),a&&i.on("click",chartManager.drilldownChartClick),r(i,n),["done","initChart",e]})},getChartInstanceFromDivId:function(e){return echarts.getInstanceByDom(document.getElementById(e))},getDataFromRestCall:function(e){var t=new Request({headers:{"Cache-Control":"no-cache","If-Modified-Since":"0",Accept:"application/json"},method:"GET",mode:"cors",credentials:"same-origin"}),n=window.location.protocol+"//"+window.location.host+e;return console.log(n),fetch(n,t).then(processStatus).then(parseJson).then(function(e){return e})["catch"](function(e){return Promise.reject(e)})},toggleLimitsClick:function(e){if(!isNullOrUndefined(e)){e=e||window.event;var t=e.target||e.srcElement,n=t.checked?1:0;chartManager.toggleLimits(n);var r={mode:chartManager.getMode(),level:chartManager.getLevel(),node:chartManager.getNode()};chartManager.drillDown(r)}},setBaseCcy:function(){return chartManager.getDataFromRestCall("/api/baseccy").then(function(e){return sessionStorage.setItem("baseccy",e||"USD"),e})},getBaseCcy:function(){var e=sessionStorage.getItem("baseccy");isNullOrUndefined(e)&&(e=Promise.resolve(chartManager.setBaseCcy()));var t=filter(currencyMap,function(t){return t.ccy===e})[0].symbol;return t},populateBusinessDates:function(){try{var e=document.getElementById("businessDates");e.options.length=0;var t=document.createDocumentFragment();return chartManager.getDataFromRestCall("/api/dates").then(function(n){var r=new Option;return r.innerHTML="- Date -",r.value="19700101",t.appendChild(r),n.forEach(function(e,n){var r=document.createElement("option");r.innerHTML=moment(e,"YYYYMMDD").format("DD-MMM-YYYY"),r.value=e,t.appendChild(r)}),e.appendChild(t),sessionStorage.setItem("businessDate",businessDates.options[0].value),"done"})["catch"](function(e){return Promise.reject(new Error(e))})}catch(n){console.error(new Error(n))}},populateBarGraphMetricList:function(e){try{var t=e;t.options.length=0;var n=document.createDocumentFragment();["CE","EEPE","CVA","DVA","NPV","FCA","FBA","FVA","ColVA"].forEach(function(e,t){var r=document.createElement("option");r.innerHTML=e,r.value=e,n.appendChild(r)}),t.appendChild(n)}catch(r){console.error(new Error(r))}},populateRiskGaugeMetricList:function(){var e=document.getElementById("gauge1_");chartManager.populateRiskGaugeMetricListImpl(e)},populateRiskGaugeMetricListImpl:function(e){try{e.options.length=0;var t=document.createDocumentFragment();if(2==chartManager.getMode()&&3==chartManager.getLevel())var n=["CE","EEPE"];else var n=["CE","EEPE","CVA","DVA","FCA","FBA","FVA"];var r=chartManager.getRiskGaugeMetric().toUpperCase(),a=!1;n.forEach(function(e,n){var i=document.createElement("option");i.innerHTML=e,i.value=e,a||e!==r||(i.selected=!0,a=!0),t.appendChild(i)}),e.appendChild(t),a||sessionStorage.setItem("gauge_metric","ce")}catch(i){console.error(new Error(i))}},flipGauge:function(e){if(!isNullOrUndefined(e)){e=e||window.event;var t=(e.target||e.srcElement,RISKGauge.getInstance()),n=chartManager.getRiskGaugeMetric(),r={mode:chartManager.getMode(),hierarchy:chartManager.getHierarchy(),node:chartManager.getNode()},a=chartManager.getGraphData(r,n,"gauge");a.then(function(e){chartManager.initChart("risk_gauge",t.getDefaults,a,t.setNewData,!1)})["catch"](function(e){console.error(new Error(e))})}},setBarGraphTitle:function(e,t){var n=chartManager.getChartInstanceFromDivId(e),r="";3==chartManager.getLevel()&&0==t[0].tradeLevel&&(r="Not Applicable at Trade Level"),n.setOption({title:[{text:r}]})},flipChart:function(e){if(!isNullOrUndefined(e)){e=e||window.event;var t=e.target||e.srcElement,n=BARCharts.getInstance(),r=filter(barGraphs,function(e){return e.name==t.name})[0].id,a=chartManager.getBarGraphMetric(t.name),i={mode:chartManager.getMode(),hierarchy:chartManager.getHierarchy(),node:chartManager.getNode()},o=chartManager.getGraphData(i,a,"bargraph");o.then(function(e){return chartManager.initChart(r,n.getDefaults,o,n.setNewData,chartManager.barGraphIsClickable()),"done"}).then(function(e){var t=filter(chartCategory,function(e){return e.metric==a});document.getElementById(r).parentNode.parentNode.getElementsByTagName("h2")[0].innerText=t[0].category,chartManager.setBarGraphTitle(r,t)})["catch"](function(e){console.error(new Error(e))})}},getGenericGraphData:function(e){if(console.debug(e),1==e.mode){if("bargraph"===e.chartType)return"/api/bargraph/"+e.date+"/"+e.hierarchy+"/"+e.metric;if("xva"===e.chartType)return"/api/xva/"+e.date+"/"+e.xvaHierarchy+"/"+e.metric;if("exposure"===e.chartType)return"/api/exposure-tree/"+e.date+"/total/Total";if("totalexposure"===e.chartType)return"/api/totalexposure-tree/total/Total";if("gauge"===e.chartType)return"/api/gauge-tree/"+e.date+"/total/Total/"+e.metric;throw"Invalid chart type : "+e.chartType}if(2==e.mode){if("bargraph"===e.chartType)return"/api/bargraph-tree/"+e.date+"/"+e.hierarchy+"/"+e.node+"/"+e.metric;if("xva"===e.chartType)return"/api/xva-tree/"+e.date+"/"+e.xvaHierarchy+"/"+e.xvaNode+"/"+e.metric;if("exposure"===e.chartType)return"/api/exposure-tree/"+e.date+"/"+e.hierarchy+"/"+e.node;if("totalexposure"===e.chartType)return"/api/totalexposure-tree/"+e.hierarchy+"/"+e.node;if("gauge"===e.chartType)return"/api/gauge-tree/"+e.date+"/"+e.hierarchy+"/"+e.node+"/"+e.metric;throw"Invalid chart type : "+e.chartType}throw"Invalid mode : "+e.mode},getBusinessDate:function(){return sessionStorage.getItem("businessDate")},getHierarchy:function(){return drilldownLevels[chartManager.getLevel()].name},setNode:function(e){sessionStorage.setItem("node",e)},getNode:function(){return sessionStorage.getItem("node")},getBarGraphMetric:function(e){var t=filter(barGraphs,function(t){return t.name==e});return(sessionStorage.getItem(e)||t[0].metric).toLowerCase()},getRiskGaugeMetric:function(){return sessionStorage.getItem("gauge_metric")},getGraphData:function(e,t,n){var r=e;r.metric=t,r.chartType=n,r.date=chartManager.getBusinessDate();var a=chartManager.getGenericGraphData(r);return chartManager.getDataFromRestCall(a)},refreshGraphs:function(e){var t=BARCharts.getInstance(),n=DONUTCharts.getInstance(),r=LINECharts.getInstance(),a=RISKGauge.getInstance();barGraphs.forEach(function(n){var r=chartManager.getBarGraphMetric(n.name),a=chartManager.getGraphData(e,r,"bargraph");a.then(function(e){return chartManager.initChart(n.id,t.getDefaults,a,t.setNewData,chartManager.barGraphIsClickable()),"done"}).then(function(e){var t=filter(chartCategory,function(e){return e.metric==r});document.getElementById(n.id).parentNode.parentNode.getElementsByTagName("h2")[0].innerText=t[0].category,chartManager.setBarGraphTitle(n.id,t)})}),xvaGraphs.forEach(function(t){var r=chartManager.getGraphData(e,t.metric,"xva");r.then(function(e){chartManager.initChart(t.name,n.getDefaults,r,n.setNewData,!0);var a=t.text+" : "+chartManager.getBaseCcy()+" "+numeral(e.sum).format("(0.00a)");document.getElementsByName(t.name)[0].innerText=a})});var i=chartManager.getGraphData(e,"","totalexposure");i.then(function(e){chartManager.initChart("line_total_exposure",r.getDefaultTotalOptions,i,r.setNewData,!1)});var o=chartManager.getGraphData(e,"","exposure");o.then(function(e){chartManager.initChart("line_exposure_profile",r.getDefaultExposureOpts,o,r.setNewData,!1)});var s=chartManager.getRiskGaugeMetric(),c=chartManager.getGraphData(e,s,"gauge");return c.then(function(e){chartManager.initChart("risk_gauge",a.getDefaults,c,a.setNewData,!1)}),"done"},setBGMetricDefaults:function(){var e=document.getElementsByClassName("selectpicker-bg");barGraphs.forEach(function(t){sessionStorage.setItem(t.name,t.metric.toUpperCase()),filter(e,function(e){return e.name==t.name})[0].value=t.metric.toUpperCase()})},resetPageDefaults:function(){var e=document.getElementsByClassName("selectpicker");[].forEach.call(e,function(e){e.selectedIndex=1}),chartManager.setMode(1);var t=businessDates.options[businessDates.selectedIndex].value;sessionStorage.setItem("businessDate",t),chartManager.setLevel(0),chartManager.setNode(""),chartManager.setBGMetricDefaults(),sessionStorage.setItem("gauge_metric","ce"),sessionStorage.setItem("limits",1)},changeDate:function(e){if(!isNullOrUndefined(e)){e=e||window.event;var t=e.target||e.srcElement;if(sessionStorage.setItem(t.name,t.value),document.getElementById(t.name).value=t.value,"businessDate"==t.name){var n={mode:chartManager.getMode(),level:chartManager.getLevel(),node:chartManager.getNode()};chartManager.drillDown(n)}}},barGraphIsClickable:function(){return 1==chartManager.getMode()||chartManager.getLevel()<3},setBGMetric:function(e){if(!isNullOrUndefined(e)){e=e||window.event;var t=e.target||e.srcElement;sessionStorage.setItem(t.name,t.value),chartManager.flipChart(e);var n=filter(userBarGraphs,function(e){return e.name==t.name});n[0].metric=t.value.toLowerCase()}},setRiskGaugeMetric:function(e){if(!isNullOrUndefined(e)){e=e||window.event;var t=e.target||e.srcElement;sessionStorage.setItem("gauge_metric",t.value.toLowerCase()),chartManager.flipGauge(e)}},setMode:function(e){sessionStorage.setItem("mode",+e)},getMode:function(){return+sessionStorage.getItem("mode")},setLevel:function(e){sessionStorage.setItem("level",+e)},getLevel:function(){return+sessionStorage.getItem("level")},setDrilldownMenu:function(e){$("input:radio")[e].checked=!0,$($('label[name^="option"]')[e]).button("toggle")},toggleLimits:function(e){sessionStorage.setItem("limits",e)},getLimits:function(){return sessionStorage.getItem("limits")},drillDown:function(e){if(chartManager.setMode(e.mode),chartManager.setLevel(e.level),chartManager.setNode(e.node),chartManager.populateRiskGaugeMetricList(),1==e.mode)e.hierarchy=chartManager.getHierarchy(),e.xvaHierarchy="trade"==e.hierarchy?"nettingset":e.hierarchy,chartManager.resetCrumbs(),chartManager.refreshGraphs(e);else{e.hierarchy=chartManager.getHierarchy(),chartManager.setDrilldownMenu(e.level);var t="/api/periscope/"+e.hierarchy+"/"+e.node;chartManager.getDataFromRestCall(t).then(function(t){t.length>1?(e.xvaHierarchy=t[1].hierarchy,e.xvaNode=t[1].item):(e.xvaHierarchy=e.hierarchy,e.xvaNode=e.node),chartManager.setCrumbs(t),chartManager.refreshGraphs(e)})}},resetCrumbs:function(){for(var e=document.getElementById("periscope");e.firstChild;)e.removeChild(e.firstChild);var t=document.createElement("li");t.className="breadcrumb-item";var n=document.createElement("a");n.href="index.html",n.id="crumb",n.setAttribute("data-hierarchy","total"),n.setAttribute("data-item","Total"),n.setAttribute("data-level","0");var r=document.createElement("i");r.className="fa fa-home",n.appendChild(r),t.appendChild(n),e.appendChild(t)},setCrumbs:function(e){chartManager.resetCrumbs();var t=document.getElementById("periscope");[].forEach.call(e,function(e){var n=document.createElement("li");n.className="breadcrumb-item";var r=document.createElement("a");r.href="#",r.id="crumb"+e.level,r.setAttribute("data-hierarchy",e.hierarchy),r.setAttribute("data-item",e.item),r.setAttribute("data-level",e.level),r.innerText=e.item,n.appendChild(r),t.appendChild(n)})},breadcrumbClick:function(e){if(!isNullOrUndefined(e)){e=e||window.event;var t=e.target||e.srcElement,n=2,r=t.getAttribute("data-item"),a=Math.min(+t.getAttribute("data-level"),3),i={mode:n,level:a,node:r};chartManager.drillDown(i)}},drilldownMenuClick:function(e){if(!isNullOrUndefined(e)){e=e||window.event;var t=e.target||e.srcElement,n={mode:1,level:t.children[0].value,node:""};chartManager.drillDown(n)}},drilldownChartClick:function(e){if(!isNullOrUndefined(e)){if(e=e||window.event,console.log(e),1==chartManager.getMode())var t=chartManager.getLevel();else var t=chartManager.getLevel()+1;"pie"===e.seriesType&&(t=Math.min(t,2));var n={mode:2,level:t,node:e.name};chartManager.drillDown(n)}}},BARCharts=function(){"use strict";function e(){function e(e,t){var n=r,a={normal:{label:{show:!0,position:"insideLeft",formatter:function(e){return"limits"==e.seriesName?"":e.name},textStyle:{color:"black"}},color:function(e){var t=["rgba(120,178,88,0.5)","rgba(255, 69, 0, 0.5)"];return t[e.seriesIndex]}}};1==chartManager.getLimits()?(n.series=[{itemStyle:a,type:t.seriesType,data:t.yaxisValues,name:"bar data"},{itemStyle:a,type:t.seriesType,data:t.yaxisLimits,name:"limits"}],n.legend.data=["limits"]):n.series=[{itemStyle:a,type:t.seriesType,data:t.yaxisValues,name:"bar data"}],n.title=[{text:t.title,subtext:t.subTitleText}],n.yAxis[0].data=t.yaxisLabels,n.yAxis[0].axisLabel={show:!1},e.setOption(n,!0)}function t(){var t={mode:chartManager.getMode(),hierarchy:chartManager.getHierarchy(),node:chartManager.getNode(),xvaHierarchy:chartManager.getHierarchy(),xvaNode:chartManager.getNode()};barGraphs.forEach(function(n){var a=chartManager.getGraphData(t,n.metric,"bargraph");chartManager.initChart(n.id,r,a,e,chartManager.barGraphIsClickable()),a.then(function(e){var t=filter(chartCategory,function(e){return e.metric==n.metric});document.getElementById(n.id).parentNode.parentNode.getElementsByTagName("h2")[0].innerText=t[0].category})})}function n(t,n){e(t,n)}var r={tooltip:{trigger:"axis",formatter:barChartTooltipFormatter},legend:{data:null},toolbox:{show:!1,feature:{dataView:{show:!1,title:"view data",lang:["Data","ok","refresh"]},magicType:{show:!0,title:{line:"Line",bar:"Bar",stack:"Stack",tiled:"Tiled"},type:["stack","tiled"]},restore:{show:!0,title:"Restore"},saveAsImage:{show:!0,title:"Save Image"}}},calculable:!0,clickable:!0,xAxis:[{type:"value",boundaryGap:!1,axisLabel:{interval:"auto",formatter:function(e){return numeral(e).format("(0.0a)")}}}],yAxis:[{type:"category",boundaryGap:!0,axisLabel:{interval:"auto",formatter:function(e){return e}},data:[]}],series:null};return{initAllCharts:t,setNewData:e,loadData:n,getDefaults:r}}var t;return{getInstance:function(){return t||(t=e()),t}}}(),LINECharts=function(){"use strict";function e(){function e(e,t){if(e.getOption().title[0].text.startsWith("Exposure")){for(var n=t.dates,r=[],o=[],s=[],c=0;c<n.length;c++)n[c]=moment(n[c],"YYYYMMDD").toDate(),r.push([n[c],t.epes[c]]),o.push([n[c],t.pfes[c]]),s.push([n[c],t.enes[c]]);var l={name:"EPE",data:r},u={name:"PFE",data:o},d={name:"ENE",data:s},h=[];h.push(l),h.push(u),h.push(d),h.forEach(function(e){e.type="line",e.smooth=!0,e.symbolSize=1,e.itemStyle={normal:{areaStyle:{type:"default"}}}});var f=i;f.legend.data=t.name,f.xAxis[0].data=n,f.series=h,e.setOption(f,!0)}else{for(var n=t.dates,m=[],p=[],g=[],c=0;c<n.length;c++)n[c]=moment(n[c],"YYYYMMDD").toDate(),m.push([n[c],t.npvs[c]]),p.push([n[c],t.ces[c]]),g.push([n[c],t.eepes[c]]);var l={name:"NPV",data:m},u={name:"CE",data:p},d={name:"EEPE",data:g},h=[];h.push(l),h.push(u),h.push(d),h.forEach(function(e){if(1==chartManager.getLimits())switch(e.name){case"CE":e.markLine={symbol:["none","none"],data:[{yAxis:+t.limitCE,name:"limit",itemStyle:{normal:{color:"#dc143c",label:{show:!1},labelLine:{show:!1}}}}]};break;case"EEPE":e.markLine={symbol:["none","none"],data:[{yAxis:+t.limitEEPE,name:"limit",itemStyle:{normal:{color:"#dc143c",label:{show:!1},labelLine:{show:!1}}}}]}}e.type="line",e.smooth=!0,e.symbolSize=1,e.itemStyle={normal:{areaStyle:{type:"default"}}}});var f=a;h.forEach(function(e){f.legend.data.push(e.name)}),f.series=h,e.setOption(f,!0)}}function t(){var t={mode:chartManager.getMode(),hierarchy:chartManager.getHierarchy(),node:chartManager.getNode(),xvaHierarchy:chartManager.getHierarchy(),xvaNode:chartManager.getNode()},n=chartManager.getGraphData(t,"","totalexposure"),r=chartManager.getGraphData(t,"","exposure");return Promise.all([n,r]).then(function(t){return chartManager.initChart("line_total_exposure",a,n,e,!1),chartManager.initChart("line_exposure_profile",i,r,e,!1),"done"})["catch"](function(e){console.error(new Error(e))})}function n(t,n){e(t,n)}var r=chartManager.getBaseCcy(),a={title:{text:"Total Exposure  "+r,subtext:"Historical Credit Exposure Trends: NPV, CE, EEPE"},tooltip:{trigger:"axis",formatter:lineChartTooltipFormatter},legend:{x:140,y:40,data:[]},toolbox:{show:!0,feature:{dataView:{show:!1,title:"view data",lang:["Data","ok","refresh"]},magicType:{show:!0,title:{line:"Line",bar:"Bar",stack:"Stack",tiled:"Tiled"},type:["line","bar"]},restore:{show:!0,title:"Restore"},saveAsImage:{show:!0,title:"Save Image"}}},dataZoom:{show:!0,realtime:!0,start:0,end:100},xAxis:[{type:"time",axisLabel:{interval:"auto",formatter:function(e){return moment(e).format("DD-MM-YYYY")}},data:[]}],yAxis:[{type:"value",axisLabel:{interval:"auto",formatter:function(e){return numeral(e).format("(0.0a)")}}}],series:[]},i={title:{text:"Exposure Profile  "+r,subtext:"Simulated EPE, ENE & PFE"},tooltip:{trigger:"axis",formatter:lineChartTooltipFormatter},legend:{x:220,y:40,data:[]},toolbox:{show:!0,feature:{magicType:{show:!0,title:{line:"Line",bar:"Bar",stack:"Stack",tiled:"Tiled"},type:["line","bar"]},restore:{show:!0,title:"Restore"},saveAsImage:{show:!0,title:"Save Image"}}},dataZoom:{show:!0,realtime:!0,start:0,end:100},xAxis:[{type:"time",boundaryGap:!0,axisLabel:{interval:"auto",formatter:function(e){return moment(e).format("DD-MM-YYYY")}},data:[]}],yAxis:[{type:"value",axisLabel:{interval:"auto",formatter:function(e){return numeral(e).format("(0.0a)")}}}],series:[]};return{initAllCharts:t,setNewData:e,loadData:n,getDefaultExposureOpts:i,getDefaultTotalOptions:a}}var t;return{getInstance:function(){return t||(t=e()),t}}}(),DONUTCharts=function(){"use strict";function e(){function e(e,t){e.setOption({series:[{data:t.data,name:t.name}],legend:{data:t.labels}})}function t(){var t={mode:chartManager.getMode(),hierarchy:chartManager.getHierarchy(),node:chartManager.getNode(),xvaHierarchy:chartManager.getHierarchy(),xvaNode:chartManager.getNode()};xvaGraphs.forEach(function(n){var a=chartManager.getGraphData(t,n.metric,"xva");chartManager.initChart(n.name,r,a,e,!0),a.then(function(e){var t=n.text+" : "+chartManager.getBaseCcy()+" "+numeral(e.sum).format("(0.00a)");document.getElementsByName(n.name)[0].innerText=t})})}function n(t,n){e(t,n)}var r={tooltip:{trigger:"item",formatter:donutChartTooltipFormatter},calculable:!0,legend:{show:!1,x:"center",y:"bottom",data:[]},toolbox:{show:!1,feature:{magicType:{show:!0,type:["pie","funnel"],option:{funnel:{x:"25%",width:"50%",funnelAlign:"center",max:1548}}},restore:{show:!0,title:"Restore"},saveAsImage:{show:!0,title:"Save Image"}}},series:[{name:"",type:"pie",radius:["40%","60%"],itemStyle:{normal:{label:{show:!0},labelLine:{show:!0}},emphasis:{label:{show:!0,position:"center",textStyle:{fontSize:"14",fontWeight:"normal"}}}},data:[]}]};return{initAllCharts:t,setNewData:e,loadData:n,getDefaults:r}}var t;return{getInstance:function(){return t||(t=e()),t}}}(),RISKGauge=function(){"use strict";function e(){function e(e,t,n,r){var a=chartManager.getBaseCcy();return e=e.toUpperCase(),t=numeral(t).format("(0,0.00)"),n=numeral(n).format("(0,0.00)"),r=numeral(r).format("(0,0.00)"),e+": "+a+" "+t+"<br/>Limit: "+a+" "+n+"<br/>Consumption: "+r+"%"}function t(t,n){t.setOption({series:[{data:[{value:n.consumption,name:n.name,tooltip:e(n.metric,n.value,n.limit,n.consumption)}]}]})}function n(){var e={mode:chartManager.getMode(),hierarchy:chartManager.getHierarchy(),node:chartManager.getNode(),xvaHierarchy:chartManager.getHierarchy(),xvaNode:chartManager.getNode()},n=chartManager.getGraphData(e,"ce","gauge");chartManager.initChart("risk_gauge",a,n,t,!1)}function r(e,n){t(e,n)}var a={tooltip:{formatter:function(e,t,n){return e.data.tooltip},position:function(e){return[e[0]+10,e[1]-10]}},series:[{pointer:{width:8,length:"85%",color:"black"},name:"Risky",type:"gauge",splitNumber:10,axisLine:{lineStyle:{color:[[.3,"rgba(120,178,88,0.5)"],[.8,"rgba(255, 150, 0, 0.5)"],[1,"rgba(255, 69, 0, 0.5)"]],width:200}},axisTick:{splitNumber:2,length:10,lineStyle:{color:"black"}},axisLabel:{formatter:function(e){switch(e+""){case"10":return"ok";case"50":return"warn";case"90":return"limit";default:return""}},textStyle:{color:"black"}},splitLine:{show:!0,length:20,lineStyle:{color:"black"}},title:{show:!0,offsetCenter:[0,"-40%"],textStyle:{fontWeight:"bolder"}},detail:{offsetCenter:["-5%",95],formatter:function(e){return Number.isNaN(e)?"NaN":e>100?"LIMIT BREACH":numeral(e).format("(0.00)")+"%"},textStyle:{color:"auto",fontWeight:"bolder",fontSize:20}},data:0}]};return{initAllCharts:n,setNewData:t,loadData:r,getDefaults:a}}var t;return{getInstance:function(){return t||(t=e()),t}}}();!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p.iterable&&(t[Symbol.iterator]=function(){return t}),t}function a(e){this.map={},e instanceof a?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function o(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),o(t)}function c(e){var t=new FileReader;return t.readAsText(e),o(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(p.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(p.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){
if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return c(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e){var t=e.toUpperCase();return g.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(d.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new a(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new a(t.headers)),this.method=u(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),a=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(a))}}),t}function f(e){var t=new a,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),a=n.join(":").trim();t.append(r,a)}),t}function m(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof a?t.headers:new a(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var p={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};a.prototype.append=function(e,r){e=t(e),r=n(r);var a=this.map[e];a||(a=[],this.map[e]=a),a.push(r)},a.prototype["delete"]=function(e){delete this.map[t(e)]},a.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},a.prototype.getAll=function(e){return this.map[t(e)]||[]},a.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},a.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},a.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},a.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},a.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},a.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},p.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},l.call(d.prototype),l.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var y=[301,302,303,307,308];m.redirect=function(e,t){if(y.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=a,e.Request=d,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){function a(){return"responseURL"in o?o.responseURL:/^X-Request-URL:/m.test(o.getAllResponseHeaders())?o.getResponseHeader("X-Request-URL"):void 0}var i;i=d.prototype.isPrototypeOf(e)&&!t?e:new d(e,t);var o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:f(o),url:a()},t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&p.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this);var dtLimits,dtBreaches,getUrl=function(e){console.debug(e);var t="api/totalportfolio/",n=sessionStorage.getItem("limitMetric_")||"CE";return t+n.toLowerCase()},flipTable=function(e){if(!isNullOrUndefined(e)){e=e||window.event;var t=e.target||e.srcElement;sessionStorage.setItem(t.name,t.value),dtLimits.ajax.url(getUrl()).load()}},filterOnDate=function(e){if(!isNullOrUndefined(e)){e=e||window.event;var t=e.target||e.srcElement;sessionStorage.setItem(t.name,t.value),$(".dt-responsive:visible").each(function(e){$(this).DataTable().draw()})}},limitLoad_=function(){console.log("[INFO] ORE Limit Table.init");var e=chartManager.setBaseCcy(),t=chartManager.populateBusinessDates();return Promise.all([e,t]).then(function(e){return console.log("[INFO] bus date calls and base ccy complete"),document.getElementById("businessDates").options[0].text="- All Dates -",console.debug(sessionStorage),"done"}).then(function(e){return console.log("[INFO] init limits table complete"),[].forEach.call(document.getElementsByClassName("selectpicker-bg"),function(e){chartManager.populateBarGraphMetricList(e),sessionStorage.setItem("limitMetric_","CE"),_AttachEvent(e,"change",flipTable)}),[].forEach.call(document.getElementsByClassName("selectpicker"),function(e){_AttachEvent(e,"change",filterOnDate)}),"done"})["catch"](function(e){console.error(new Error(e))})},doLimitTableLoaded=function(){$('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t=$(e.target);$.inArray("limits-tab",t.parent().get(0).classList)>=0?($(".limits-tab").addClass("active"),$(".breaches-tab").removeClass("active"),document.getElementById("limitMetric_").disabled=!1,document.getElementById("limitMetric_").value=sessionStorage.getItem("limitMetric_")):($(".breaches-tab").addClass("active"),$(".limits-tab").removeClass("active"),document.getElementById("limitMetric_").disabled=!0,document.getElementById("limitMetric_").value="--"),$(".dt-responsive:visible").each(function(e){$(this).DataTable().scroller.measure(),$(this).DataTable().columns.adjust().responsive.recalc()})});var e=function(e){var t=[];return[].forEach.call(e,function(e){var n={};n.creditRating=e.creditRating,n.counterParty=e.counterParty,n.nettingSet=e.nettingSet,n.trade=e.trade,n.metric=e.metric,n.limit=e.limit;var r=e.consumptions;[].forEach.call(r,function(e){var r=JSON.parse(JSON.stringify(n));r.value=e.value,r.date=e.date,r.consumption=e.consumption,t.push(r)})}),t},t={createdRow:function(e,t,n){t.consumption>75&&$(e).addClass("warning"),t.consumption>100&&$(e).addClass("danger")},columnDefs:[{className:"text-right",targets:[5,6,8]}],columns:[{title:"Credit Rating",data:"creditRating"},{title:"Counterparty",data:"counterParty"},{title:"Netting Set",data:"nettingSet"},{title:"Trade",data:"trade"},{title:"Metric",data:"metric",render:function(e,t,n){return e.toUpperCase()}},{title:"Limit Value",data:"limit"},{title:"Consumption Value",data:"value",render:$.fn.dataTable.render.number(",",".",0,chartManager.getBaseCcy())},{title:"Date",data:"date",render:function(e,t,n){return moment(e,"YYYYMMDD").format("DD-MMM-YYYY")}},{title:" Cons %",data:"consumption",render:$.fn.dataTable.render.number(",",".",2,"","%")}],deferRender:!0,scrollY:380,scrollCollapse:!0,scroller:!0,dom:"Bfrtip",buttons:[{extend:"copy",className:"btn-sm"},{extend:"csv",className:"btn-sm"},{extend:"excel",className:"btn-sm"},{extend:"pdfHtml5",className:"btn-sm"},{extend:"print",className:"btn-sm"}]};dtLimits=$("#datatable-responsive").DataTable(t,t.ajax={url:getUrl(this),dataSrc:e}),dtBreaches=$("#datatable-responsive2").DataTable(t,t.ajax={url:"api/limitbreaches",dataSrc:e}),$.fn.dataTable.ext.search.push(function(e,t,n){var r=document.getElementById("businessDates").value;return"19700101"==r||t[7]==moment(r,"YYYYMMDD").format("DD-MMM-YYYY")})};(function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return ke.call(e,t)}function r(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function a(e){Me.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function i(e,t){var n=!0;return m(function(){return n&&(a(e),n=!1),t.apply(this,arguments)},t)}function o(e,t){vt[e]||(a(t),vt[e]=!0)}function s(e,t){return function(n){return y(e.call(this,n),t)}}function c(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}function l(e,t){var n,r,a=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(a,"months");return 0>t-i?(n=e.clone().add(a-1,"months"),r=(t-i)/(i-n)):(n=e.clone().add(a+1,"months"),r=(t-i)/(n-i)),-(a+r)}function u(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(r=e.isPM(n),r&&12>t&&(t+=12),r||12!==t||(t=0),t):t}function d(){}function h(e,t){t!==!1&&L(e),p(this,e),this._d=new Date((+e._d)),bt===!1&&(bt=!0,Me.updateOffset(this),bt=!1)}function f(e){var t=T(e),n=t.year||0,r=t.quarter||0,a=t.month||0,i=t.week||0,o=t.day||0,s=t.hour||0,c=t.minute||0,l=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*l+6e4*c+36e5*s,this._days=+o+7*i,this._months=+a+3*r+12*n,this._data={},this._locale=Me.localeData(),this._bubble()}function m(e,t){for(var r in t)n(t,r)&&(e[r]=t[r]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t){var n,r,a;if("undefined"!=typeof t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),"undefined"!=typeof t._i&&(e._i=t._i),"undefined"!=typeof t._f&&(e._f=t._f),"undefined"!=typeof t._l&&(e._l=t._l),"undefined"!=typeof t._strict&&(e._strict=t._strict),"undefined"!=typeof t._tzm&&(e._tzm=t._tzm),"undefined"!=typeof t._isUTC&&(e._isUTC=t._isUTC),"undefined"!=typeof t._offset&&(e._offset=t._offset),"undefined"!=typeof t._pf&&(e._pf=t._pf),"undefined"!=typeof t._locale&&(e._locale=t._locale),Ue.length>0)for(n in Ue)r=Ue[n],a=t[r],"undefined"!=typeof a&&(e[r]=a);return e}function g(e){return 0>e?Math.ceil(e):Math.floor(e)}function y(e,t,n){for(var r=""+Math.abs(e),a=e>=0;r.length<t;)r="0"+r;return(a?n?"+":"":"-")+r}function v(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function _(e,t){var n;return t=G(t,e),e.isBefore(t)?n=v(e,t):(n=v(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function b(e,t){return function(n,r){var a,i;return null===r||isNaN(+r)||(o(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),i=n,n=r,r=i),n="string"==typeof n?+n:n,a=Me.duration(n,r),M(this,a,e),this}}function M(e,t,n,r){var a=t._milliseconds,i=t._days,o=t._months;r=null==r||r,a&&e._d.setTime(+e._d+a*n),i&&pe(e,"Date",me(e,"Date")+i*n),o&&fe(e,me(e,"Month")+o*n),r&&Me.updateOffset(e,i||o)}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function D(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function x(e,t,n){var r,a=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),o=0;for(r=0;a>r;r++)(n&&e[r]!==t[r]||!n&&E(e[r])!==E(t[r]))&&o++;return o+i}function C(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=dt[e]||ht[t]||t}return e}function T(e){var t,r,a={};for(r in e)n(e,r)&&(t=C(r),t&&(a[t]=e[r]));return a}function k(t){var n,r;if(0===t.indexOf("week"))n=7,r="day";else{if(0!==t.indexOf("month"))return;n=12,r="month"}Me[t]=function(a,i){var o,s,c=Me._locale[t],l=[];if("number"==typeof a&&(i=a,a=e),s=function(e){var t=Me().utc().set(r,e);return c.call(Me._locale,t,a||"")},null!=i)return s(i);for(o=0;n>o;o++)l.push(s(o));return l}}function E(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function S(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function O(e,t,n){return le(Me([e,11,31+t-n]),t,n).week}function Y(e){return I(e)?366:365}function I(e){return e%4===0&&e%100!==0||e%400===0}function L(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Se]<0||e._a[Se]>11?Se:e._a[Oe]<1||e._a[Oe]>S(e._a[Ee],e._a[Se])?Oe:e._a[Ye]<0||e._a[Ye]>24||24===e._a[Ye]&&(0!==e._a[Ie]||0!==e._a[Le]||0!==e._a[Ne])?Ye:e._a[Ie]<0||e._a[Ie]>59?Ie:e._a[Le]<0||e._a[Le]>59?Le:e._a[Ne]<0||e._a[Ne]>999?Ne:-1,e._pf._overflowDayOfYear&&(Ee>t||t>Oe)&&(t=Oe),e._pf.overflow=t)}function N(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function B(e){return e?e.toLowerCase().replace("_","-"):e}function U(e){for(var t,n,r,a,i=0;i<e.length;){for(a=B(e[i]).split("-"),t=a.length,n=B(e[i+1]),n=n?n.split("-"):null;t>0;){if(r=A(a.slice(0,t).join("-")))return r;if(n&&n.length>=t&&x(a,n,!0)>=t-1)break;t--}i++}return null}function A(e){var t=null;if(!Be[e]&&Ae)try{t=Me.locale(),require("./locale/"+e),Me.locale(t)}catch(n){}return Be[e]}function G(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(Me.isMoment(e)||D(e)?+e:+Me(e))-+n,n._d.setTime(+n._d+r),Me.updateOffset(n,!1),n):Me(e).local()}function $(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function R(e){var t,n,r=e.match(Fe);for(t=0,n=r.length;n>t;t++)r[t]=yt[r[t]]?yt[r[t]]:$(r[t]);return function(a){var i="";for(t=0;n>t;t++)i+=r[t]instanceof Function?r[t].call(a,e):r[t];return i}}function F(e,t){return e.isValid()?(t=P(t,e.localeData()),ft[t]||(ft[t]=R(t)),ft[t](e)):e.localeData().invalidDate()}function P(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Pe.lastIndex=0;r>=0&&Pe.test(e);)e=e.replace(Pe,n),Pe.lastIndex=0,r-=1;return e}function H(e,t){var n,r=t._strict;switch(e){case"Q":return Xe;case"DDDD":return tt;case"YYYY":case"GGGG":case"gggg":return r?nt:je;case"Y":case"G":case"g":return at;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return r?rt:ze;case"S":if(r)return Xe;case"SS":if(r)return et;case"SSS":if(r)return tt;case"DDD":return We;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ve;case"a":case"A":return t._locale._meridiemParse;case"x":return Je;case"X":return Qe;case"Z":case"ZZ":return qe;case"T":return Ke;case"SSSS":return Ze;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return r?et:He;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return He;case"Do":return r?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return n=new RegExp(Q(J(e.replace("\\","")),"i"))}}function W(e){e=e||"";var t=e.match(qe)||[],n=t[t.length-1]||[],r=(n+"").match(lt)||["-",0,0],a=+(60*r[1])+E(r[2]);return"+"===r[0]?a:-a}function j(e,t,n){var r,a=n._a;switch(e){case"Q":null!=t&&(a[Se]=3*(E(t)-1));break;case"M":case"MM":null!=t&&(a[Se]=E(t)-1);break;case"MMM":case"MMMM":r=n._locale.monthsParse(t,e,n._strict),null!=r?a[Se]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(a[Oe]=E(t));break;case"Do":null!=t&&(a[Oe]=E(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=E(t));break;case"YY":a[Ee]=Me.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":a[Ee]=E(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":a[Ye]=E(t);break;case"m":case"mm":a[Ie]=E(t);break;case"s":case"ss":a[Le]=E(t);break;case"S":case"SS":case"SSS":case"SSSS":a[Ne]=E(1e3*("0."+t));break;case"x":n._d=new Date(E(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=W(t);break;case"dd":case"ddd":case"dddd":r=n._locale.weekdaysParse(t),null!=r?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=E(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=Me.parseTwoDigitYear(t)}}function z(e){var n,r,a,i,o,s,c;n=e._w,null!=n.GG||null!=n.W||null!=n.E?(o=1,s=4,r=t(n.GG,e._a[Ee],le(Me(),1,4).year),a=t(n.W,1),i=t(n.E,1)):(o=e._locale._week.dow,s=e._locale._week.doy,r=t(n.gg,e._a[Ee],le(Me(),o,s).year),a=t(n.w,1),null!=n.d?(i=n.d,o>i&&++a):i=null!=n.e?n.e+o:o),c=ue(r,a,i,s,o),e._a[Ee]=c.year,e._dayOfYear=c.dayOfYear}function Z(e){var n,r,a,i,o=[];if(!e._d){for(a=q(e),e._w&&null==e._a[Oe]&&null==e._a[Se]&&z(e),e._dayOfYear&&(i=t(e._a[Ee],a[Ee]),e._dayOfYear>Y(i)&&(e._pf._overflowDayOfYear=!0),r=ie(i,0,e._dayOfYear),e._a[Se]=r.getUTCMonth(),e._a[Oe]=r.getUTCDate()),n=0;3>n&&null==e._a[n];++n)e._a[n]=o[n]=a[n];for(;7>n;n++)e._a[n]=o[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Ye]&&0===e._a[Ie]&&0===e._a[Le]&&0===e._a[Ne]&&(e._nextDay=!0,e._a[Ye]=0),e._d=(e._useUTC?ie:ae).apply(null,o),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ye]=24)}}function V(e){var t;e._d||(t=T(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],Z(e))}function q(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function K(t){if(t._f===Me.ISO_8601)return void ee(t);t._a=[],t._pf.empty=!0;var n,r,a,i,o,s=""+t._i,c=s.length,l=0;for(a=P(t._f,t._locale).match(Fe)||[],n=0;n<a.length;n++)i=a[n],r=(s.match(H(i,t))||[])[0],r&&(o=s.substr(0,s.indexOf(r)),o.length>0&&t._pf.unusedInput.push(o),s=s.slice(s.indexOf(r)+r.length),l+=r.length),yt[i]?(r?t._pf.empty=!1:t._pf.unusedTokens.push(i),j(i,r,t)):t._strict&&!r&&t._pf.unusedTokens.push(i);t._pf.charsLeftOver=c-l,s.length>0&&t._pf.unusedInput.push(s),t._pf.bigHour===!0&&t._a[Ye]<=12&&(t._pf.bigHour=e),t._a[Ye]=u(t._locale,t._a[Ye],t._meridiem),Z(t),L(t)}function J(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,a){return t||n||r||a})}function Q(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(e){var t,n,a,i,o;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=p({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=r(),t._f=e._f[i],K(t),N(t)&&(o+=t._pf.charsLeftOver,o+=10*t._pf.unusedTokens.length,t._pf.score=o,(null==a||a>o)&&(a=o,n=t));m(e,n||t)}function ee(e){var t,n,r=e._i,a=it.exec(r);if(a){for(e._pf.iso=!0,t=0,n=st.length;n>t;t++)if(st[t][1].exec(r)){e._f=st[t][0]+(a[6]||" ");break}for(t=0,n=ct.length;n>t;t++)if(ct[t][1].exec(r)){e._f+=ct[t][0];break}r.match(qe)&&(e._f+="Z"),K(e)}else e._isValid=!1}function te(e){ee(e),e._isValid===!1&&(delete e._isValid,Me.createFromInputFallback(e))}function ne(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function re(t){var n,r=t._i;r===e?t._d=new Date:D(r)?t._d=new Date((+r)):null!==(n=Ge.exec(r))?t._d=new Date((+n[1])):"string"==typeof r?te(t):w(r)?(t._a=ne(r.slice(0),function(e){return parseInt(e,10)}),Z(t)):"object"==typeof r?V(t):"number"==typeof r?t._d=new Date(r):Me.createFromInputFallback(t)}function ae(e,t,n,r,a,i,o){var s=new Date(e,t,n,r,a,i,o);return 1970>e&&s.setFullYear(e),s}function ie(e){var t=new Date(Date.UTC.apply(null,arguments));return 1970>e&&t.setUTCFullYear(e),t}function oe(e,t){if("string"==typeof e)if(isNaN(e)){if(e=t.weekdaysParse(e),"number"!=typeof e)return null}else e=parseInt(e,10);return e}function se(e,t,n,r,a){return a.relativeTime(t||1,!!n,e,r)}function ce(e,t,n){var r=Me.duration(e).abs(),a=Te(r.as("s")),i=Te(r.as("m")),o=Te(r.as("h")),s=Te(r.as("d")),c=Te(r.as("M")),l=Te(r.as("y")),u=a<mt.s&&["s",a]||1===i&&["m"]||i<mt.m&&["mm",i]||1===o&&["h"]||o<mt.h&&["hh",o]||1===s&&["d"]||s<mt.d&&["dd",s]||1===c&&["M"]||c<mt.M&&["MM",c]||1===l&&["y"]||["yy",l];return u[2]=t,u[3]=+e>0,u[4]=n,se.apply({},u)}function le(e,t,n){var r,a=n-t,i=n-e.day();return i>a&&(i-=7),a-7>i&&(i+=7),r=Me(e).add(i,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function ue(e,t,n,r,a){var i,o,s=ie(e,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:a,i=a-s+(s>r?7:0)-(a>s?7:0),o=7*(t-1)+(n-a)+i+1,{year:o>0?e:e-1,dayOfYear:o>0?o:Y(e-1)+o}}function de(t){var n,r=t._i,a=t._f;return t._locale=t._locale||Me.localeData(t._l),null===r||a===e&&""===r?Me.invalid({nullInput:!0}):("string"==typeof r&&(t._i=r=t._locale.preparse(r)),Me.isMoment(r)?new h(r,(!0)):(a?w(a)?X(t):K(t):re(t),n=new h(t),n._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function he(e,t){var n,r;if(1===t.length&&w(t[0])&&(t=t[0]),!t.length)return Me();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function fe(e,t){var n;return"string"==typeof t&&(t=e.localeData().monthsParse(t),"number"!=typeof t)?e:(n=Math.min(e.date(),S(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function me(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function pe(e,t,n){return"Month"===t?fe(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function ge(e,t){return function(n){return null!=n?(pe(this,e,n),Me.updateOffset(this,t),this):me(this,e)}}function ye(e){return 400*e/146097}function ve(e){return 146097*e/400}function _e(e){Me.duration.fn[e]=function(){return this._data[e]}}function be(e){"undefined"==typeof ender&&(we=Ce.moment,Ce.moment=e?i("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",Me):Me)}for(var Me,we,De,xe="2.9.0",Ce="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,Te=Math.round,ke=Object.prototype.hasOwnProperty,Ee=0,Se=1,Oe=2,Ye=3,Ie=4,Le=5,Ne=6,Be={},Ue=[],Ae="undefined"!=typeof module&&module&&module.exports,Ge=/^\/?Date\((\-?\d+)/i,$e=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Re=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Fe=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Pe=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,He=/\d\d?/,We=/\d{1,3}/,je=/\d{1,4}/,ze=/[+\-]?\d{1,6}/,Ze=/\d+/,Ve=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,qe=/Z|[\+\-]\d\d:?\d\d/gi,Ke=/T/i,Je=/[\+\-]?\d+/,Qe=/[\+\-]?\d+(\.\d{1,3})?/,Xe=/\d/,et=/\d\d/,tt=/\d{3}/,nt=/\d{4}/,rt=/[+-]?\d{6}/,at=/[+-]?\d+/,it=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ot="YYYY-MM-DDTHH:mm:ssZ",st=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ct=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],lt=/([\+\-]|\d\d)/gi,ut=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),dt={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ht={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},ft={},mt={s:45,m:45,h:22,d:26,M:11},pt="DDD w W M D d".split(" "),gt="M D H h m s w W".split(" "),yt={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return y(this.year()%100,2)},YYYY:function(){return y(this.year(),4)},YYYYY:function(){return y(this.year(),5)},YYYYYY:function(){var e=this.year(),t=e>=0?"+":"-";return t+y(Math.abs(e),6)},gg:function(){return y(this.weekYear()%100,2)},gggg:function(){return y(this.weekYear(),4)},ggggg:function(){return y(this.weekYear(),5)},GG:function(){return y(this.isoWeekYear()%100,2)},GGGG:function(){return y(this.isoWeekYear(),4)},GGGGG:function(){return y(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return E(this.milliseconds()/100)},SS:function(){return y(E(this.milliseconds()/10),2)},SSS:function(){return y(this.milliseconds(),3)},SSSS:function(){return y(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+y(E(e/60),2)+":"+y(E(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return 0>e&&(e=-e,t="-"),t+y(E(e/60),2)+y(E(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},vt={},_t=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],bt=!1;pt.length;)De=pt.pop(),yt[De+"o"]=c(yt[De],De);for(;gt.length;)De=gt.pop(),yt[De+De]=s(yt[De],2);yt.DDDD=s(yt.DDD,3),m(d.prototype,{set:function(e){var t,n;for(n in e)t=e[n],"function"==typeof t?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var r,a,i;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;12>r;r++){if(a=Me.utc([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;7>t;t++)if(this._weekdaysParse[t]||(n=Me([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var a=this._relativeTime[n];return"function"==typeof a?a(e,t,n,r):a.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return le(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),Me=function(t,n,a,i){var o;return"boolean"==typeof a&&(i=a,a=e),o={},o._isAMomentObject=!0,o._i=t,o._f=n,o._l=a,o._strict=i,o._isUTC=!1,o._pf=r(),de(o)},Me.suppressDeprecationWarnings=!1,Me.createFromInputFallback=i("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),Me.min=function(){var e=[].slice.call(arguments,0);return he("isBefore",e)},Me.max=function(){var e=[].slice.call(arguments,0);return he("isAfter",e)},Me.utc=function(t,n,a,i){var o;return"boolean"==typeof a&&(i=a,a=e),o={},o._isAMomentObject=!0,o._useUTC=!0,o._isUTC=!0,o._l=a,o._i=t,o._f=n,o._strict=i,o._pf=r(),de(o).utc()},Me.unix=function(e){return Me(1e3*e)},Me.duration=function(e,t){var r,a,i,o,s=e,c=null;return Me.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(c=$e.exec(e))?(r="-"===c[1]?-1:1,s={y:0,d:E(c[Oe])*r,h:E(c[Ye])*r,m:E(c[Ie])*r,s:E(c[Le])*r,ms:E(c[Ne])*r}):(c=Re.exec(e))?(r="-"===c[1]?-1:1,i=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*r},s={y:i(c[2]),M:i(c[3]),d:i(c[4]),h:i(c[5]),m:i(c[6]),s:i(c[7]),w:i(c[8])}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(o=_(Me(s.from),Me(s.to)),s={},s.ms=o.milliseconds,s.M=o.months),a=new f(s),Me.isDuration(e)&&n(e,"_locale")&&(a._locale=e._locale),a},Me.version=xe,Me.defaultFormat=ot,Me.ISO_8601=function(){},Me.momentProperties=Ue,Me.updateOffset=function(){},Me.relativeTimeThreshold=function(t,n){return mt[t]!==e&&(n===e?mt[t]:(mt[t]=n,!0))},Me.lang=i("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return Me.locale(e,t)}),Me.locale=function(e,t){
var n;return e&&(n="undefined"!=typeof t?Me.defineLocale(e,t):Me.localeData(e),n&&(Me.duration._locale=Me._locale=n)),Me._locale._abbr},Me.defineLocale=function(e,t){return null!==t?(t.abbr=e,Be[e]||(Be[e]=new d),Be[e].set(t),Me.locale(e),Be[e]):(delete Be[e],null)},Me.langData=i("moment.langData is deprecated. Use moment.localeData instead.",function(e){return Me.localeData(e)}),Me.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Me._locale;if(!w(e)){if(t=A(e))return t;e=[e]}return U(e)},Me.isMoment=function(e){return e instanceof h||null!=e&&n(e,"_isAMomentObject")},Me.isDuration=function(e){return e instanceof f};for(De=_t.length-1;De>=0;--De)k(_t[De]);Me.normalizeUnits=function(e){return C(e)},Me.invalid=function(e){var t=Me.utc(NaN);return null!=e?m(t._pf,e):t._pf.userInvalidated=!0,t},Me.parseZone=function(){return Me.apply(null,arguments).parseZone()},Me.parseTwoDigitYear=function(e){return E(e)+(E(e)>68?1900:2e3)},Me.isDate=D,m(Me.fn=h.prototype,{clone:function(){return Me(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date((+this)):this._d},toISOString:function(){var e=Me(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():F(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return N(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&x(this._a,(this._isUTC?Me.utc(this._a):Me(this._a)).toArray())>0)},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=F(this,e||Me.defaultFormat);return this.localeData().postformat(t)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(e,t,n){var r,a,i=G(e,this),o=6e4*(i.utcOffset()-this.utcOffset());return t=C(t),"year"===t||"month"===t||"quarter"===t?(a=l(this,i),"quarter"===t?a/=3:"year"===t&&(a/=12)):(r=this-i,a="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-o)/864e5:"week"===t?(r-o)/6048e5:r),n?a:g(a)},from:function(e,t){return Me.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(Me(),e)},calendar:function(e){var t=e||Me(),n=G(t,this).startOf("day"),r=this.diff(n,"days",!0),a=-6>r?"sameElse":-1>r?"lastWeek":0>r?"lastDay":1>r?"sameDay":2>r?"nextDay":7>r?"nextWeek":"sameElse";return this.format(this.localeData().calendar(a,this,Me(t)))},isLeapYear:function(){return I(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=oe(e,this.localeData()),this.add(e-t,"d")):t},month:ge("Month",!0),startOf:function(e){switch(e=C(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=C(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){var n;return t=C("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=Me.isMoment(e)?e:Me(e),+this>+e):(n=Me.isMoment(e)?+e:+Me(e),n<+this.clone().startOf(t))},isBefore:function(e,t){var n;return t=C("undefined"!=typeof t?t:"millisecond"),"millisecond"===t?(e=Me.isMoment(e)?e:Me(e),+e>+this):(n=Me.isMoment(e)?+e:+Me(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=C(t||"millisecond"),"millisecond"===t?(e=Me.isMoment(e)?e:Me(e),+this===+e):(n=+Me(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:i("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=Me.apply(null,arguments),this>e?this:e}),max:i("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=Me.apply(null,arguments),e>this?this:e}),zone:i("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,r=this._offset||0;return null!=e?("string"==typeof e&&(e=W(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!t||this._changeInProgress?M(this,Me.duration(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Me.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(W(this._i)),this},hasAlignedHourOffset:function(e){return e=e?Me(e).utcOffset():0,(this.utcOffset()-e)%60===0},daysInMonth:function(){return S(this.year(),this.month())},dayOfYear:function(e){var t=Te((Me(this).startOf("day")-Me(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=le(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=le(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=le(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return O(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return O(this.year(),e.dow,e.doy)},get:function(e){return e=C(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else e=C(e),"function"==typeof this[e]&&this[e](t);return this},locale:function(t){var n;return t===e?this._locale._abbr:(n=Me.localeData(t),null!=n&&(this._locale=n),this)},lang:i("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),Me.fn.millisecond=Me.fn.milliseconds=ge("Milliseconds",!1),Me.fn.second=Me.fn.seconds=ge("Seconds",!1),Me.fn.minute=Me.fn.minutes=ge("Minutes",!1),Me.fn.hour=Me.fn.hours=ge("Hours",!0),Me.fn.date=ge("Date",!0),Me.fn.dates=i("dates accessor is deprecated. Use date instead.",ge("Date",!0)),Me.fn.year=ge("FullYear",!0),Me.fn.years=i("years accessor is deprecated. Use year instead.",ge("FullYear",!0)),Me.fn.days=Me.fn.day,Me.fn.months=Me.fn.month,Me.fn.weeks=Me.fn.week,Me.fn.isoWeeks=Me.fn.isoWeek,Me.fn.quarters=Me.fn.quarter,Me.fn.toJSON=Me.fn.toISOString,Me.fn.isUTC=Me.fn.isUtc,m(Me.duration.fn=f.prototype,{_bubble:function(){var e,t,n,r=this._milliseconds,a=this._days,i=this._months,o=this._data,s=0;o.milliseconds=r%1e3,e=g(r/1e3),o.seconds=e%60,t=g(e/60),o.minutes=t%60,n=g(t/60),o.hours=n%24,a+=g(n/24),s=g(ye(a)),a-=g(ve(s)),i+=g(a/30),a%=30,s+=g(i/12),i%=12,o.days=a,o.months=i,o.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*E(this._months/12)},humanize:function(e){var t=ce(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=Me.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=Me.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=C(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if(e=C(e),"month"===e||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*ye(t),"month"===e?n:n/12;switch(t=this._days+Math.round(ve(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:Me.fn.lang,locale:Me.fn.locale,toIsoString:i("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),a=Math.abs(this.minutes()),i=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||a||i?"T":"")+(r?r+"H":"")+(a?a+"M":"")+(i?i+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),Me.duration.fn.toString=Me.duration.fn.toISOString;for(De in ut)n(ut,De)&&_e(De.toLowerCase());Me.duration.fn.asMilliseconds=function(){return this.as("ms")},Me.duration.fn.asSeconds=function(){return this.as("s")},Me.duration.fn.asMinutes=function(){return this.as("m")},Me.duration.fn.asHours=function(){return this.as("h")},Me.duration.fn.asDays=function(){return this.as("d")},Me.duration.fn.asWeeks=function(){return this.as("weeks")},Me.duration.fn.asMonths=function(){return this.as("M")},Me.duration.fn.asYears=function(){return this.as("y")},Me.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===E(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),Ae?module.exports=Me:"function"==typeof define&&define.amd?(define(function(e,t,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(Ce.moment=we),Me}),be(!0)):be()}).call(this),function(){function e(e){this._value=e}function t(e,t,n,r){var a,i,o=Math.pow(10,t);return i=(n(e*o)/o).toFixed(t),r&&(a=new RegExp("0{1,"+r+"}$"),i=i.replace(a,"")),i}function n(e,t,n){var r;return r=t.indexOf("$")>-1?a(e,t,n):t.indexOf("%")>-1?i(e,t,n):t.indexOf(":")>-1?o(e,t):c(e._value,t,n)}function r(e,t){var n,r,a,i,o,c=t,l=["KB","MB","GB","TB","PB","EB","ZB","YB"],u=!1;if(t.indexOf(":")>-1)e._value=s(t);else if(t===g)e._value=0;else{for("."!==m[p].delimiters.decimal&&(t=t.replace(/\./g,"").replace(m[p].delimiters.decimal,".")),n=new RegExp("[^a-zA-Z]"+m[p].abbreviations.thousand+"(?:\\)|(\\"+m[p].currency.symbol+")?(?:\\))?)?$"),r=new RegExp("[^a-zA-Z]"+m[p].abbreviations.million+"(?:\\)|(\\"+m[p].currency.symbol+")?(?:\\))?)?$"),a=new RegExp("[^a-zA-Z]"+m[p].abbreviations.billion+"(?:\\)|(\\"+m[p].currency.symbol+")?(?:\\))?)?$"),i=new RegExp("[^a-zA-Z]"+m[p].abbreviations.trillion+"(?:\\)|(\\"+m[p].currency.symbol+")?(?:\\))?)?$"),o=0;o<=l.length&&!(u=t.indexOf(l[o])>-1&&Math.pow(1024,o+1));o++);e._value=(u?u:1)*(c.match(n)?Math.pow(10,3):1)*(c.match(r)?Math.pow(10,6):1)*(c.match(a)?Math.pow(10,9):1)*(c.match(i)?Math.pow(10,12):1)*(t.indexOf("%")>-1?.01:1)*((t.split("-").length+Math.min(t.split("(").length-1,t.split(")").length-1))%2?1:-1)*Number(t.replace(/[^0-9\.]+/g,"")),e._value=u?Math.ceil(e._value):e._value}return e._value}function a(e,t,n){var r,a,i=t.indexOf("$"),o=t.indexOf("("),s=t.indexOf("-"),l="";return t.indexOf(" $")>-1?(l=" ",t=t.replace(" $","")):t.indexOf("$ ")>-1?(l=" ",t=t.replace("$ ","")):t=t.replace("$",""),a=c(e._value,t,n),1>=i?a.indexOf("(")>-1||a.indexOf("-")>-1?(a=a.split(""),r=1,(o>i||s>i)&&(r=0),a.splice(r,0,m[p].currency.symbol+l),a=a.join("")):a=m[p].currency.symbol+l+a:a.indexOf(")")>-1?(a=a.split(""),a.splice(-1,0,l+m[p].currency.symbol),a=a.join("")):a=a+l+m[p].currency.symbol,a}function i(e,t,n){var r,a="",i=100*e._value;return t.indexOf(" %")>-1?(a=" ",t=t.replace(" %","")):t=t.replace("%",""),r=c(i,t,n),r.indexOf(")")>-1?(r=r.split(""),r.splice(-1,0,a+"%"),r=r.join("")):r=r+a+"%",r}function o(e){var t=Math.floor(e._value/60/60),n=Math.floor((e._value-60*t*60)/60),r=Math.round(e._value-60*t*60-60*n);return t+":"+(10>n?"0"+n:n)+":"+(10>r?"0"+r:r)}function s(e){var t=e.split(":"),n=0;return 3===t.length?(n+=60*Number(t[0])*60,n+=60*Number(t[1]),n+=Number(t[2])):2===t.length&&(n+=60*Number(t[0]),n+=Number(t[1])),Number(n)}function c(e,n,r){var a,i,o,s,c,l,u=!1,d=!1,h=!1,f="",y=!1,v=!1,_=!1,b=!1,M=!1,w="",D="",x=Math.abs(e),C=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],T="",k=!1;if(0===e&&null!==g)return g;if(n.indexOf("(")>-1?(u=!0,n=n.slice(1,-1)):n.indexOf("+")>-1&&(d=!0,n=n.replace(/\+/g,"")),n.indexOf("a")>-1&&(y=n.indexOf("aK")>=0,v=n.indexOf("aM")>=0,_=n.indexOf("aB")>=0,b=n.indexOf("aT")>=0,M=y||v||_||b,n.indexOf(" a")>-1?(f=" ",n=n.replace(" a","")):n=n.replace("a",""),x>=Math.pow(10,12)&&!M||b?(f+=m[p].abbreviations.trillion,e/=Math.pow(10,12)):x<Math.pow(10,12)&&x>=Math.pow(10,9)&&!M||_?(f+=m[p].abbreviations.billion,e/=Math.pow(10,9)):x<Math.pow(10,9)&&x>=Math.pow(10,6)&&!M||v?(f+=m[p].abbreviations.million,e/=Math.pow(10,6)):(x<Math.pow(10,6)&&x>=Math.pow(10,3)&&!M||y)&&(f+=m[p].abbreviations.thousand,e/=Math.pow(10,3))),n.indexOf("b")>-1)for(n.indexOf(" b")>-1?(w=" ",n=n.replace(" b","")):n=n.replace("b",""),o=0;o<=C.length;o++)if(a=Math.pow(1024,o),i=Math.pow(1024,o+1),e>=a&&i>e){w+=C[o],a>0&&(e/=a);break}return n.indexOf("o")>-1&&(n.indexOf(" o")>-1?(D=" ",n=n.replace(" o","")):n=n.replace("o",""),D+=m[p].ordinal(e)),n.indexOf("[.]")>-1&&(h=!0,n=n.replace("[.]",".")),s=e.toString().split(".")[0],c=n.split(".")[1],l=n.indexOf(","),c?(c.indexOf("[")>-1?(c=c.replace("]",""),c=c.split("["),T=t(e,c[0].length+c[1].length,r,c[1].length)):T=t(e,c.length,r),s=T.split(".")[0],T=T.split(".")[1].length?m[p].delimiters.decimal+T.split(".")[1]:"",h&&0===Number(T.slice(1))&&(T="")):s=t(e,null,r),s.indexOf("-")>-1&&(s=s.slice(1),k=!0),l>-1&&(s=s.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m[p].delimiters.thousands)),0===n.indexOf(".")&&(s=""),(u&&k?"(":"")+(!u&&k?"-":"")+(!k&&d?"+":"")+s+T+(D?D:"")+(f?f:"")+(w?w:"")+(u&&k?")":"")}function l(e,t){m[e]=t}function u(e){var t=e.toString().split(".");return t.length<2?1:Math.pow(10,t[1].length)}function d(){var e=Array.prototype.slice.call(arguments);return e.reduce(function(e,t){var n=u(e),r=u(t);return n>r?n:r},-1/0)}var h,f="1.5.3",m={},p="en",g=null,y="0,0",v="undefined"!=typeof module&&module.exports;h=function(t){return h.isNumeral(t)?t=t.value():0===t||"undefined"==typeof t?t=0:Number(t)||(t=h.fn.unformat(t)),new e(Number(t))},h.version=f,h.isNumeral=function(t){return t instanceof e},h.language=function(e,t){if(!e)return p;if(e&&!t){if(!m[e])throw new Error("Unknown language : "+e);p=e}return(t||!m[e])&&l(e,t),h},h.languageData=function(e){if(!e)return m[p];if(!m[e])throw new Error("Unknown language : "+e);return m[e]},h.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(e){var t=e%10;return 1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th"},currency:{symbol:"$"}}),h.zeroFormat=function(e){g="string"==typeof e?e:null},h.defaultFormat=function(e){y="string"==typeof e?e:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(e,t){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var n,r,a=this.length>>>0,i=!1;for(1<arguments.length&&(r=t,i=!0),n=0;a>n;++n)this.hasOwnProperty(n)&&(i?r=e(r,this[n],n,this):(r=this[n],i=!0));if(!i)throw new TypeError("Reduce of empty array with no initial value");return r}),h.fn=e.prototype={clone:function(){return h(this)},format:function(e,t){return n(this,e?e:y,void 0!==t?t:Math.round)},unformat:function(e){return"[object Number]"===Object.prototype.toString.call(e)?e:r(this,e?e:y)},value:function(){return this._value},valueOf:function(){return this._value},set:function(e){return this._value=Number(e),this},add:function(e){function t(e,t){return e+n*t}var n=d.call(null,this._value,e);return this._value=[this._value,e].reduce(t,0)/n,this},subtract:function(e){function t(e,t){return e-n*t}var n=d.call(null,this._value,e);return this._value=[e].reduce(t,this._value*n)/n,this},multiply:function(e){function t(e,t){var n=d(e,t);return e*n*t*n/(n*n)}return this._value=[this._value,e].reduce(t,1),this},divide:function(e){function t(e,t){var n=d(e,t);return e*n/(t*n)}return this._value=[this._value,e].reduce(t),this},difference:function(e){return Math.abs(h(this._value).subtract(e).value())}},v&&(module.exports=h),"undefined"==typeof ender&&(this.numeral=h),"function"==typeof define&&define.amd&&define([],function(){return h})}.call(this),!function e(t,n,r){function a(o,s){if(!n[o]){if(!t[o]){var c="function"==typeof require&&require;if(!s&&c)return c(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[o]={exports:{}};t[o][0].call(u.exports,function(e){var n=t[o][1][e];return a(n?n:e)},u,u.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,n){"use strict";function r(){}function a(e){try{return e.then}catch(t){return g=t,y}}function i(e,t){try{return e(t)}catch(n){return g=n,y}}function o(e,t,n){try{e(t,n)}catch(r){return g=r,y}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._37=0,this._12=null,this._59=[],e!==r&&m(e,this)}function c(e,t,n){return new e.constructor(function(a,i){var o=new s(r);o.then(a,i),l(e,new f(t,n,o))})}function l(e,t){for(;3===e._37;)e=e._12;return 0===e._37?void e._59.push(t):void p(function(){var n=1===e._37?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._37?u(t.promise,e._12):d(t.promise,e._12));var r=i(n,e._12);r===y?d(t.promise,g):u(t.promise,r)})}function u(e,t){if(t===e)return d(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var n=a(t);if(n===y)return d(e,g);if(n===e.then&&t instanceof s)return e._37=3,e._12=t,void h(e);if("function"==typeof n)return void m(n.bind(t),e)}e._37=1,e._12=t,h(e)}function d(e,t){e._37=2,e._12=t,h(e)}function h(e){for(var t=0;t<e._59.length;t++)l(e,e._59[t]);e._59=null}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=o(e,function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,d(t,e))});n||r!==y||(n=!0,d(t,g))}var p=e("asap/raw"),g=null,y={};t.exports=s,s._99=r,s.prototype.then=function(e,t){if(this.constructor!==s)return c(this,e,t);var n=new s(r);return l(this,new f(e,t,n)),n}},{"asap/raw":4}],2:[function(e,t,n){"use strict";function r(e){var t=new a(a._99);return t._37=1,t._12=e,t}var a=e("./core.js");t.exports=a;var i=r(!0),o=r(!1),s=r(null),c=r(void 0),l=r(0),u=r("");a.resolve=function(e){if(e instanceof a)return e;if(null===e)return s;if(void 0===e)return c;if(e===!0)return i;if(e===!1)return o;if(0===e)return l;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new a(t.bind(e))}catch(n){return new a(function(e,t){t(n)})}return r(e)},a.all=function(e){var t=Array.prototype.slice.call(e);return new a(function(e,n){function r(o,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof a&&s.then===a.prototype.then){for(;3===s._37;)s=s._12;return 1===s._37?r(o,s._12):(2===s._37&&n(s._12),void s.then(function(e){r(o,e)},n))}var c=s.then;if("function"==typeof c){var l=new a(c.bind(s));return void l.then(function(e){r(o,e)},n)}}t[o]=s,0===--i&&e(t)}if(0===t.length)return e([]);for(var i=t.length,o=0;o<t.length;o++)r(o,t[o])})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,n){e.forEach(function(e){a.resolve(e).then(t,n)})})},a.prototype["catch"]=function(e){return this.then(null,e)}},{"./core.js":1}],3:[function(e,t,n){"use strict";function r(){if(c.length)throw c.shift()}function a(e){var t;t=s.length?s.pop():new i,t.task=e,o(t)}function i(){this.task=null}var o=e("./raw"),s=[],c=[],l=o.makeRequestCallFromTimer(r);t.exports=a,i.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(c.push(e),l())}finally{this.task=null,s[s.length]=this}}},{"./raw":4}],4:[function(e,t,n){(function(e){"use strict";function n(e){s.length||(o(),c=!0),s[s.length]=e}function r(){for(;l<s.length;){var e=l;if(l+=1,s[e].call(),l>u){for(var t=0,n=s.length-l;n>t;t++)s[t]=s[t+l];s.length-=l,l=0}}s.length=0,l=0,c=!1}function a(e){var t=1,n=new d(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}t.exports=n;var o,s=[],c=!1,l=0,u=1024,d=e.MutationObserver||e.WebKitMutationObserver;o="function"==typeof d?a(r):i(r),n.requestFlush=o,n.makeRequestCallFromTimer=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){"function"!=typeof Promise.prototype.done&&(Promise.prototype.done=function(e,t){var n=arguments.length?this.then.apply(this,arguments):this;n.then(null,function(e){setTimeout(function(){throw e},0)})})},{}],6:[function(e,t,n){e("asap"),"undefined"==typeof Promise&&(Promise=e("./lib/core.js"),e("./lib/es6-extensions.js")),e("./polyfill-done.js")},{"./lib/core.js":1,"./lib/es6-extensions.js":2,"./polyfill-done.js":5,asap:3}]},{},[6]),function(e,t){var n=function(e,t,n){var r;return function(){function a(){n||e.apply(i,o),r=null}var i=this,o=arguments;r?clearTimeout(r):n&&e.apply(i,o),r=setTimeout(a,t||100)}};jQuery.fn[t]=function(e){return e?this.bind("resize",n(e)):this.trigger(t)}}(jQuery,"smartresize");var CURRENT_URL=window.location.href.split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_COL=$(".right_col"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer");$(document).ready(function(){var e=function(){$RIGHT_COL.css("min-height",$(window).height());var e=$BODY.outerHeight(),t=$BODY.hasClass("footer_fixed")?-10:$FOOTER.height(),n=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),r=e<n?n:e;r-=$NAV_MENU.height()+t,$RIGHT_COL.css("min-height",r)};$SIDEBAR_MENU.find("a").on("click",function(t){var n=$(this).parent();n.is(".active")?(n.removeClass("active active-sm"),$("ul:first",n).slideUp(function(){e()})):(n.parent().is(".child_menu")||($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()),n.addClass("active"),$("ul:first",n).slideDown(function(){e()}))}),$MENU_TOGGLE.on("click",function(){$BODY.hasClass("nav-md")?($SIDEBAR_MENU.find("li.active ul").hide(),$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")):($SIDEBAR_MENU.find("li.active-sm ul").show(),$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm")),$BODY.toggleClass("nav-md nav-sm"),e()}),$SIDEBAR_MENU.find('a[href="'+CURRENT_URL+'"]').parent("li").addClass("current-page"),$SIDEBAR_MENU.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("current-page").parents("ul").slideDown(function(){e()}).parent().addClass("active"),$(window).smartresize(function(){e()}),e(),$.fn.mCustomScrollbar&&$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:!0,theme:"minimal",mouseWheel:{preventDefault:!0}})}),$(document).ready(function(){$(".collapse-link").on("click",function(){var e=$(this).closest(".x_panel"),t=$(this).find("i"),n=e.find(".x_content");e.attr("style")?n.slideToggle(200,function(){e.removeAttr("style")}):(n.slideToggle(200),e.css("height","auto")),t.toggleClass("fa-chevron-up fa-chevron-down")}),$(".close-link").click(function(){var e=$(this).closest(".x_panel");e.remove()})}),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})}),$(".progress .progress-bar")[0]&&$(".progress .progress-bar").progressbar(),$(document).ready(function(){if($(".js-switch")[0]){var e=Array.prototype.slice.call(document.querySelectorAll(".js-switch"));e.forEach(function(e){new Switchery(e,{color:"#26B99A"})})}}),$(document).ready(function(){$("input.flat")[0]&&$(document).ready(function(){$("input.flat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})})}),$("table input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$("table input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()});var checkState="";$(".bulk_action input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$(".bulk_action input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()}),$(".bulk_action input#check-all").on("ifChecked",function(){checkState="all",countChecked()}),$(".bulk_action input#check-all").on("ifUnchecked",function(){checkState="none",countChecked()}),$(document).ready(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200),$expand=$(this).find(">:first-child"),"+"==$expand.text()?$expand.text("-"):$expand.text("+")})}),"undefined"!=typeof NProgress&&($(document).ready(function(){NProgress.start()}),$(window).load(function(){NProgress.done()}));var processStatus=function(e){return e.status>=200&&e.status<300||0===e.status?Promise.resolve(e):Promise.reject(new Error(e.statusText))},parseJson=function(e){return e.json()},parseTextResponse=function(e){return e.text()};